var api_token="c7d15088276f47cb94d423cf484706ff";$.ajaxSetup({headers:{"X-Auth-Token":api_token}});var competitions=$("#competitions"),competition=$("#competition"),team=$("#team"),player=$("#player"),current_competition_id=0,current_competition_name="",current_team_id=0,current_team_name="",players=[];function get_id(e,t){return e.replace(/^https?:\/\//,"").split("/")[t]}function add_player_info(e){var t=$("#player-info").find(".card-body"),a=moment.duration(moment(e.contract).diff(moment())).years(),i=moment.duration(moment(e.contract).diff(moment())).months();t.empty().append("<dl class='row mb-0'><dt class='col-sm-2'>Name</dt><dd class='col-sm-10'>"+e.name+"</dd><dt class='col-sm-2'>Date of Birth</dt><dd class='col-sm-10'>"+moment(e.dob).format("DD/MM/YYYY")+" ("+moment().diff(e.dob,"years")+" years old)</dd><dt class='col-sm-2'>Nationality</dt><dd class='col-sm-10'>"+e.nationality+"</dd><dt class='col-sm-2'>Position</dt><dd class='col-sm-10'>"+e.position+"</dd><dt class='col-sm-2'>Number</dt><dd class='col-sm-10'>"+e.number+"</dd><dt class='col-sm-2'>Contract until</dt><dd class='col-sm-10'>"+moment(e.contract).format("DD/MM/YYYY")+" ("+(0===a?"":a+(a>1?" years ":" year "))+(0===i?"":i+(i>1?" months ":" month "))+" left)</dd></dl>")}function build_player_page(e){competitions.hide(),competition.hide(),team.fadeOut(),$("#player-breadcrumb").find("a").html("Back to "+current_team_name),add_player_info(players[e]),player.fadeIn()}function add_team_analysis(e,t,a){var i=$("#team-analysis").find(".card-body").find("#team-analysis-canvas");i.empty().append("<canvas id='nationalities-chart'></canvas>");var n=[];$.each(t.players,function(e,t){n.push(t.nationality)});var o={};$.each(n,function(e,t){o.hasOwnProperty(t)?o[t]++:o[t]=1});var r=[],s=[];$.each(o,function(e,t){r.push(e),s.push(t)});var d=document.getElementById("nationalities-chart").getContext("2d");new Chart(d,{type:"horizontalBar",data:{labels:r,datasets:[{data:s,backgroundColor:Please.make_color({base_color:"DarkTurquoise",colors_returned:r.length}),borderWidth:1,borderColor:"#343a40"}]},options:{legend:{display:!1},title:{display:!0,fontSize:16,fontFamily:"'Work Sans', sans-serif",fontColor:"#17a2b8",text:"Nationalities"},scales:{yAxes:[{gridLines:{color:"rgba(23, 162, 184, 0.2)",zeroLineColor:"rgba(23, 162, 184, 0.2)"},ticks:{fontFamily:"'Work Sans', sans-serif",fontColor:"#17a2b8"}}],xAxes:[{gridLines:{color:"rgba(23, 162, 184, 0.2)",zeroLineColor:"rgba(23, 162, 184, 0.2)"},ticks:{fontFamily:"'Work Sans', sans-serif",fontColor:"#17a2b8",beginAtZero:!0,userCallback:function(e,t,a){if(Math.floor(e)===e)return e}}}]},responsive:!0}});i.show()}function get_fixture_result(e){var t="";return"IN_PLAY"===e.status?t+=e.result.goalsHomeTeam+" - "+e.result.goalsAwayTeam:-1!==$.inArray(e.status,["SCHEDULED","TIMED","POSTPONED"])?t+="-":"FINISHED"===e.status&&(t+="FT: "+e.result.goalsHomeTeam+" - "+e.result.goalsAwayTeam+"<br>",e.result.halfTime&&(t+="HT: "+e.result.halfTime.goalsHomeTeam+" - "+e.result.halfTime.goalsAwayTeam+"<br>"),e.result.extraTime&&(t+="ET: "+e.result.extraTime.goalsHomeTeam+" - "+e.result.extraTime.goalsAwayTeam)),t}function add_fixtures(e,t){var a=$();$("#competition-fixtures-in-play, #competition-fixtures-scheduled, #competition-fixtures-finished").find("tbody").empty(),$("#team-fixtures-in-play, #team-fixtures-scheduled, #team-fixtures-finished").find("tbody").empty();var i=!1,n=!1,o=!1,r=!1,s=!1,d=!1;$.each(e.fixtures,function(e,l){"competition"===t&&"IN_PLAY"===l.status&&(a=$("#competition-fixtures-in-play").find("tbody"),i=!0),"competition"===t&&"SCHEDULED"===l.status&&(a=$("#competition-fixtures-scheduled").find("tbody"),n=!0),"competition"===t&&"FINISHED"===l.status&&(a=$("#competition-fixtures-finished").find("tbody"),o=!0),"team"===t&&"IN_PLAY"===l.status&&(a=$("#team-fixtures-in-play").find("tbody"),r=!0),"team"===t&&"SCHEDULED"===l.status&&(a=$("#team-fixtures-scheduled").find("tbody"),s=!0),"team"===t&&"FINISHED"===l.status&&(a=$("#team-fixtures-finished").find("tbody"),d=!0);var c='"'+get_id(l._links.homeTeam.href,3)+'"',m='"'+get_id(l._links.awayTeam.href,3)+'"';a.append("<tr><td class='border-info align-middle'>"+moment(new Date(l.date)).format("DD/MM/YYYY<br>HH:mm")+"</td><td class='border-info align-middle'><a class='text-info' href='#' onclick='event.preventDefault(); build_team_page("+c+");'>"+l.homeTeamName+"</a></td><td class='border-info align-middle'>"+get_fixture_result(l)+"</td><td class='border-info align-middle'><a class='text-info' href='#' onclick='event.preventDefault(); build_team_page("+m+");'>"+l.awayTeamName+"</a></td></tr>")}),"competition"===t&&!1===i&&($("#competition-fixtures-in-play").find(".table-responsive").hide(),$("#competition-fixtures-in-play-error").html("There are currently no in-play fixtures for this competition.").show()),"competition"===t&&!1===n&&($("#competition-fixtures-scheduled").find(".table-responsive").hide(),$("#competition-fixtures-scheduled-error").html("There are no scheduled fixtures for this competition.").show()),"competition"===t&&!1===o&&($("#competition-fixtures-finished").find(".table-responsive").hide(),$("#competition-fixtures-finished-error").html("There are no finished fixtures for this competition.").show()),"team"===t&&!1===r&&($("#team-fixtures-in-play").find(".table-responsive").hide(),$("#team-fixtures-in-play-error").html("There are currently no in-play fixtures for this team.").show()),"team"===t&&!1===s&&($("#team-fixtures-scheduled").find(".table-responsive").hide(),$("#team-fixtures-scheduled-error").html("There are no scheduled fixtures for this team.").show()),"team"===t&&!1===d&&($("#team-fixtures-finished").find(".table-responsive").hide(),$("#team-fixtures-finished-error").html("There are no finished fixtures for this team.").show())}function get_team_fixtures(e){return $.ajax({url:"http://api.football-data.org/v1/teams/"+e+"/fixtures"}).then(function(e){return e}).catch(function(e){return e.status})}function add_team_players(e){$("#goalkeepers, #defenders, #midfielders, #attackers").next().empty(),players=[];var t=0,a=0,i=0,n=0,o=0;$.each(e.players,function(e,r){var s={name:r.name,dob:r.dateOfBirth,nationality:r.nationality,position:r.position,number:r.jerseyNumber,contract:r.contractUntil};o+=moment().diff(r.dateOfBirth,"years"),"Keeper"===r.position?($("#goalkeepers").next().append("<a class='btn btn-info bg-transparent text-info mt-0 mr-2 mb-2 ml-0' href='#' onclick='event.preventDefault(); build_player_page(\""+e+"\");'>"+r.name+"</a>"),t+=1):r.position.indexOf("Back")>=0?($("#defenders").next().append("<a class='btn btn-info bg-transparent text-info mt-0 mr-2 mb-2 ml-0' href='#' onclick='event.preventDefault(); build_player_page(\""+e+"\");'>"+r.name+"</a>"),a+=1):r.position.indexOf("Midfield")>=0?($("#midfielders").next().append("<a class='btn btn-info bg-transparent text-info mt-0 mr-2 mb-2 ml-0' href='#' onclick='event.preventDefault(); build_player_page(\""+e+"\");'>"+r.name+"</a>"),i+=1):(r.position.indexOf("Wing")>=0||r.position.indexOf("Forward")>=0)&&($("#attackers").next().append("<a class='btn btn-info bg-transparent text-info mt-0 mr-2 mb-2 ml-0' href='#' onclick='event.preventDefault(); build_player_page(\""+e+"\");'>"+r.name+"</a>"),n+=1),players.push(s),1}),$("#goalkeepers").html(1===t?t+" Goalkeeper":t+" Goalkeepers"),$("#defenders").html(1===a?a+" Defender":a+" Defenders"),$("#midfielders").html(1===i?i+" Midfielder":i+" Midfielders"),$("#attackers").html(1===n?n+" Attacker":n+" Attackers"),$("#team-info").find(".mb-0").append("<dt class='col-md-12 col-lg-3'>No. of players</dt><dd class='col-md-12 col-lg-9'>"+e.count+"</dd>");var r=(o/players.length).toFixed(2);$("#team-info").find(".mb-0").append("<dt class='col-md-12 col-lg-3'>Average age</dt><dd class='col-md-12 col-lg-9'>"+r+"</dd>")}function get_team_players(e){return $.ajax({url:"http://api.football-data.org/v1/teams/"+e+"/players"}).then(function(e){return e}).catch(function(e){return e.status})}function add_team_info(e){$("#team-info").find(".card-body").empty().append("<div class='container'><div class='row'><div class='col-lg-3 text-center'><img src='"+e.crestUrl+"' onerror=\"this.src='http://via.placeholder.com/150x150'\" width='150px'/></div><div class='col-lg-9'><dl class='row mb-0'><dt class='col-md-12 col-lg-3'>Team name</dt><dd class='col-md-12 col-lg-9'>"+e.name+"</dd></dl></div></div></div>")}function get_team_info(e){return $.ajax({url:"http://api.football-data.org/v1/teams/"+e}).then(function(e){return e}).catch(function(e){return e.status})}function build_team_page(e){competitions.hide(),competition.fadeOut(),player.hide(),$("#team-breadcrumb").find("a").html("Back to "+current_competition_name),$.when(get_team_info(e),get_team_players(e),get_team_fixtures(e)).then(function(t,a,i){current_team_id=e,current_team_name=t.name,$("#team-nav").find(".card-header").html(current_team_name),-1!==$.inArray(t,[400,403,404,429])?$("#team-info").find(".card-body").html("The information is not available for this team."):add_team_info(t),-1!==$.inArray(a,[400,403,404,429])||0===a.players.length?($("#team-players").find("dl, hr").hide(),$("#team-players-error").html("The players are not available for this team.").show(),$("#team-analysis-canvas").hide(),$("#team-analysis-error").html("The analysis is not possible because the players are not available for this team.").show()):($("#team-players-error").hide(),$("#team-players").find("dl, hr").fadeIn(),add_team_players(a),$("#team-analysis-error").hide(),add_team_analysis(t,a,i)),-1!==$.inArray(i,[400,403,404,429])?($("#team-fixtures-in-play, #team-fixtures-scheduled, #team-fixtures-finished").find(".table-responsive").hide(),$("#team-fixtures-in-play-error, #team-fixtures-scheduled-error, #team-fixtures-finished-error").html("The fixtures are not available for this team.").show()):($("#team-fixtures-in-play-error, #team-fixtures-scheduled-error, #team-fixtures-finished-error").hide(),$("#team-fixtures-in-play, #team-fixtures-scheduled, #team-fixtures-finished").find(".table-responsive").fadeIn(),add_fixtures(i,"team")),team.fadeIn()})}function get_competition_fixtures(e){return $.ajax({url:"http://api.football-data.org/v1/competitions/"+e+"/fixtures"}).then(function(e){return e}).catch(function(e){return e.status})}function add_competition_standings(e){var t=$("#competition-standings").find(".card-body").find("tbody");e.standing?(t.empty(),$.each(e.standing,function(e,a){var i='"'+get_id(a._links.team.href,3)+'"';t.append("<tr><td class='border-info align-middle'>"+a.position+"</td><td class='border-info text-left align-middle'><img class='mr-2' src='"+a.crestURI+"' onerror=\"this.src='http://via.placeholder.com/20x20'\" width='20' /><a class='text-info' href='#' onclick='event.preventDefault(); build_team_page("+i+");'>"+a.teamName+"</a></td><td class='border-info align-middle'>"+a.playedGames+"</td><td class='border-info align-middle'>"+a.wins+"</td><td class='border-info align-middle'>"+a.draws+"</td><td class='border-info align-middle'>"+a.losses+"</td><td class='border-info align-middle'>"+a.goals+"</td><td class='border-info align-middle'>"+a.goalsAgainst+"</td><td class='border-info align-middle'>"+a.goalDifference+"</td><td class='border-info align-middle'>"+a.points+"</td></tr>")})):e.standings}function get_competition_standings(e){return $.ajax({url:"http://api.football-data.org/v1/competitions/"+e+"/leagueTable"}).then(function(e){return e}).catch(function(e){return e.status})}function add_competition_teams(e){var t=$("#competition-teams").find(".card-body");t.empty(),$.each(e.teams,function(e,a){var i='"'+get_id(a._links.self.href,3)+'"';t.append("<a class='btn btn-info bg-transparent text-info mt-0 mr-2 mb-2 ml-0' href='#' onclick='event.preventDefault(); build_team_page("+i+");'>"+a.name+"</a>")})}function get_competition_teams(e){return $.ajax({url:"http://api.football-data.org/v1/competitions/"+e+"/teams"}).then(function(e){return e}).catch(function(e){return e.status})}function add_competition_info(e){$("#competition-info").find(".card-body").empty().append("<dl class='row mb-0'><dt class='col-sm-5 col-md-4 col-lg-3 col-xl-2'>League name</dt><dd class='col-sm-7 col-md-8 col-lg-9 col-xl-10'>"+e.caption+"</dd><dt class='col-sm-5 col-md-4 col-lg-3 col-xl-2'>No. of teams</dt><dd class='col-sm-7 col-md-8 col-lg-9 col-xl-10'>"+e.numberOfTeams+"</dd><dt class='col-sm-5 col-md-4 col-lg-3 col-xl-2'>Current match day</dt><dd class='col-sm-7 col-md-8 col-lg-9 col-xl-10'>"+e.currentMatchday+"</dd><dt class='col-sm-5 col-md-4 col-lg-3 col-xl-2'>No. of match days</dt><dd class='col-sm-7 col-md-8 col-lg-9 col-xl-10'>"+e.numberOfMatchdays+"</dd><dt class='col-sm-5 col-md-4 col-lg-3 col-xl-2'>No. of games</dt><dd class='col-sm-7 col-md-8 col-lg-9 col-xl-10'>"+e.numberOfGames+"</dd></dl>")}function get_competition_info(e){return $.ajax({url:"http://api.football-data.org/v1/competitions/"+e}).then(function(e){return e}).catch(function(e){return e.status})}function build_competition_page(e){competitions.fadeOut(),team.fadeOut(),player.hide(),$.when(get_competition_info(e),get_competition_teams(e),get_competition_standings(e),get_competition_fixtures(e)).then(function(t,a,i,n){current_competition_id=e,current_competition_name=t.caption,$("#competition-nav").find(".card-header").html(current_competition_name),-1!==$.inArray(t,[400,403,404,429])?$("#competition-info").find(".card-body").html("The information is not available for this competition."):add_competition_info(t),-1!==$.inArray(a,[400,403,404,429])?$("#competition-teams").find(".card-body").html("<div class='text-left'>The teams are not available for this competition.</div>"):add_competition_teams(a),-1!==$.inArray(i,[400,403,404,429])?($("#competition-standings").find(".table-responsive").hide(),$("#competition-standings-error").html("The standings are not available for this competition.").show()):($("#competition-standings-error").hide(),$("#competition-standings").find(".table-responsive").fadeIn(),add_competition_standings(i)),-1!==$.inArray(n,[400,403,404,429])?($("#competition-fixtures-in-play, #competition-fixtures-scheduled, #competition-fixtures-finished").find(".table-responsive").hide(),$("#competition-fixtures-in-play-error, #competition-fixtures-scheduled-error, #competition-fixtures-finished-error").html("The fixtures are not available for this competition.").show()):($("#competition-fixtures-in-play-error, #competition-fixtures-scheduled-error, #competition-fixtures-finished-error").hide(),$("#competition-fixtures-in-play, #competition-fixtures-scheduled, #competition-fixtures-finished").find(".table-responsive").fadeIn(),add_fixtures(n,"competition")),competition.fadeIn()})}function build_competitions_page(){competition.fadeOut(),team.hide(),player.hide();var e=competitions.find(".card-body");$.ajax({url:"http://api.football-data.org/v1/competitions/"}).then(function(t){e.empty(),$.each(t,function(t,a){var i='"'+get_id(a._links.self.href,3)+'"';e.append("<a href='#' class='btn btn-info bg-transparent text-info m-2' onclick='event.preventDefault(); build_competition_page("+i+");'>"+a.caption+" <span class='badge badge-info text-dark'>"+a.numberOfTeams+"</span></a>")}),competitions.fadeIn()}).catch(function(t){e.append("<span class='text-info'>"+t.responseJSON.error+"</span>"),competitions.fadeIn()})}$("#competition-breadcrumb").find("a").click(function(e){e.preventDefault(),build_competitions_page()}),$("#team-breadcrumb").find("a").click(function(e){e.preventDefault(),build_competition_page(current_competition_id)}),$("#player-breadcrumb").find("a").click(function(e){e.preventDefault(),build_team_page(current_team_id)}),competitions.hide(),competition.hide(),team.hide(),player.hide(),build_competitions_page(),$('a.page-scroll[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var e=$(this.hash);if((e=e.length?e:$("[name="+this.hash.slice(1)+"]")).length)return $("html, body").animate({scrollTop:e.offset().top-40},1e3,"easeInOutExpo"),!1}});