var api_token="c7d15088276f47cb94d423cf484706ff";$.ajaxSetup({headers:{"X-Auth-Token":api_token}});var competitions=$("#competitions"),competition=$("#competition"),team=$("#team"),current_competition_id=0,current_competition_name="";function get_id(t,e){return t.replace(/^https?:\/\//,"").split("/")[e]}function add_competition_fixtures(t){competition.append("<div id='competition-fixtures' class='card bg-transparent border-info'><div class='card-header border-info text-info'>Fixtures</div><div class='card-body'><div class='table-responsive'><table class='table table-bordered text-info text-center mb-0'><thead><tr><th class='border-info align-middle' scope='col'>Date & Time</th><th class='border-info align-middle' scope='col'>Home Team</th><th class='border-info align-middle' scope='col'>Score</th><th class='border-info align-middle' scope='col'>Away Team</th></tr></thead><tbody></tbody></table></div></div></div>"),$.each(t.fixtures,function(t,e){var a='"'+get_id(e._links.homeTeam.href,3)+'"',i='"'+get_id(e._links.awayTeam.href,3)+'"',o=e.result.goalsHomeTeam,d=e.result.goalsAwayTeam;competition.find("#competition-fixtures").find(".card-body").find("tbody").append("<tr><td class='border-info align-middle'>"+moment(new Date(e.date)).format("DD/MM/YYYY<br>HH:mm")+"</td><td class='border-info align-middle'><a class='text-info' href='#' onclick='event.preventDefault(); get_team("+a+");'>"+e.homeTeamName+"</a></td><td class='border-info align-middle'>"+(null===o&&null===d?"-":o+" - "+d+"<br>"+e.result.halfTime.goalsHomeTeam+" - "+e.result.halfTime.goalsAwayTeam)+"</td><td class='border-info align-middle'><a class='text-info' href='#' onclick='event.preventDefault(); get_team("+i+");'>"+e.awayTeamName+"</a></td></tr>")})}function add_competition_teams(t,e){competition.append("<div id='competition-teams' class='card bg-transparent border-info mb-3'><div class='card-header border-info text-info'>Teams</div><div class='card-body text-center'></div></div>"),$.each(t.teams,function(t,a){var i='"'+get_id(a._links.self.href,3)+'", "'+e+'"';competition.find("#competition-teams").find(".card-body").append("<a class='btn btn-info bg-transparent text-info m-2' href='#' onclick='event.preventDefault(); get_team("+i+");'>"+a.name+"</a>")})}function add_tournament_standings(t,e){}function add_league_standings(t,e){competition.append("<div id='competition-league-table' class='card bg-transparent border-info mb-3'><div class='card-header border-info text-info'>League Table</div><div class='card-body'><div class='table-responsive'><table class='table table-bordered text-info text-center mb-0'><thead><tr><th class='border-info align-middle' scope='col'>#</th><th class='border-info text-left align-middle' scope='col'>Club</th><th class='border-info align-middle' scope='col'>MP</th><th class='border-info align-middle' scope='col'>W</th><th class='border-info align-middle' scope='col'>D</th><th class='border-info align-middle' scope='col'>L</th><th class='border-info align-middle' scope='col'>GF</th><th class='border-info align-middle' scope='col'>GA</th><th class='border-info align-middle' scope='col'>GD</th><th class='border-info align-middle' scope='col'>Pts</th></tr></thead><tbody></tbody></table></div></div></div>"),console.log(t),$.each(t.standing,function(t,a){var i='"'+get_id(a._links.team.href,3)+'", "'+e+'"';competition.find("#competition-league-table").find(".card-body").find("tbody").append("<tr><td class='border-info align-middle'>"+a.position+"</td><td class='border-info text-left align-middle'><img class='mr-2' src='"+a.crestURI+"' width='20' /><a class='text-info' href='#' onclick='event.preventDefault(); get_team("+i+");'>"+a.teamName+"</a></td><td class='border-info align-middle'>"+a.playedGames+"</td><td class='border-info align-middle'>"+a.wins+"</td><td class='border-info align-middle'>"+a.draws+"</td><td class='border-info align-middle'>"+a.losses+"</td><td class='border-info align-middle'>"+a.goals+"</td><td class='border-info align-middle'>"+a.goalsAgainst+"</td><td class='border-info align-middle'>"+a.goalDifference+"</td><td class='border-info align-middle'>"+a.points+"</td></tr>")})}function add_competition_info(t){competition.append("<div id='competition-info' class='card bg-transparent border-info mb-3'><div class='card-header border-info text-info'>Competition</div><div class='card-body text-info'><dl class='row mb-0'><dt class='col-sm-3'>League name</dt><dd class='col-sm-9'>"+t.caption+"</dd><dt class='col-sm-3'>Number of teams</dt><dd class='col-sm-9'>"+t.numberOfTeams+"</dd><dt class='col-sm-3'>Current match day</dt><dd class='col-sm-9'>"+t.currentMatchday+"</dd><dt class='col-sm-3'>Number of match days</dt><dd class='col-sm-9'>"+t.numberOfMatchdays+"</dd><dt class='col-sm-3'>Number of games</dt><dd class='col-sm-9'>"+t.numberOfGames+"</dd></dl></div></div>")}function add_competition_breadcrumb(){competition.append("<nav aria-label='breadcrumb'><ol class='breadcrumb bg-transparent border border-info'><li id='back-competitions' class='breadcrumb-item' aria-current='page'><a href='#' class='text-info'>Back to Competitions</a></li></ol></nav>")}function build_competition_page(t){competitions.empty().hide(),team.empty().hide(),add_competition_breadcrumb(t),$.ajax({url:"http://api.football-data.org/v1/competitions/"+t}).then(function(e){current_competition_name=e.caption,add_competition_info(e),$.ajax({url:"http://api.football-data.org/v1/competitions/"+t+"/leagueTable"}).then(function(e){e.standing?add_league_standings(e,t):e.standings&&add_tournament_standings(e,t),$.ajax({url:"http://api.football-data.org/v1/competitions/"+t+"/teams"}).then(function(e){add_competition_teams(e,t),$.ajax({url:"http://api.football-data.org/v1/competitions/"+t+"/fixtures"}).then(function(t){add_competition_fixtures(t)})})}),$("#back-competitions").click(function(t){t.preventDefault(),build_competitions_page()}),competition.show()})}function build_competitions_page(){competition.empty().hide(),team.empty().hide(),$.ajax({url:"http://api.football-data.org/v1/competitions/"}).then(function(t){competitions.append("<div class='card bg-transparent border-info'><div class='card-header border-info text-info'>Competitions</div><div class='card-body text-center'></div></div>"),$.each(t,function(t,e){var a='"'+get_id(e._links.self.href,3)+'"';competitions.find(".card-body").append("<a href='#' class='btn btn-info bg-transparent text-info m-2' onclick='event.preventDefault(); build_competition_page("+a+");'>"+e.caption+" <span class='badge badge-info text-dark'>"+e.numberOfTeams+"</span></a>")}),competitions.show()})}function add_team_breadcrumb(){team.append("<nav aria-label='breadcrumb'><ol class='breadcrumb bg-transparent border border-info'><li id='back-competition' class='breadcrumb-item' aria-current='page'><a class='text-info' href='#'>Back to "+current_competition_name+"</a></li></ol></nav>")}function add_team_players(t){team.append("<div id='team-players' class='card bg-transparent border-info'><div class='card-header border-info text-info'>Players</div><div class='card-body text-center'></div></div>"),$.each(t.players,function(t,e){team.find("#team-players").find(".card-body").append("<a class='btn btn-info bg-transparent text-info m-2' href='#'>"+e.name+"</a>")})}function build_team_page(t){add_team_breadcrumb(t),$.ajax({url:"http://api.football-data.org/v1/teams/"+t}).then(function(e){console.log(e),$.ajax({url:"http://api.football-data.org/v1/teams/"+t+"/players"}).then(function(e){console.log(e),add_team_players(e),$.ajax({url:"http://api.football-data.org/v1/teams/"+t+"/fixtures"}).then(function(t){console.log(t)})})})}function get_team(t,e){competitions.empty().hide(),competition.empty().hide(),team.show(),build_team_page(t),current_competition_id=e,$("#back-competition").click(function(t){t.preventDefault(),build_competition_page(current_competition_id)})}competition.hide(),team.hide(),build_competitions_page();